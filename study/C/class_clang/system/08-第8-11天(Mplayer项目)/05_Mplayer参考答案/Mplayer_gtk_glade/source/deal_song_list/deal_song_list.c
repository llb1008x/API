#include<stdio.h>#include<unistd.h>#include<string.h>#include<stdlib.h>#include<dirent.h>/********************************************************   º¯Êı¹¦ÄÜ:»ñÈ¡Ö¸¶¨Ä¿Â¼ÏÂµÄmp3¸èÇúÎÄ¼ş*   ²ÎÊıÀàĞÍ:song_path=¸èÇúÂ·¾¶,song_num=´æ´¢¸èÇú¸öÊı*   ·µ»ØÀàĞÍ:·µ»Ø¸èÇúÁĞ±íÖ¸Õë********************************************************/char **get_song_list(const char *song_path, int *song_num){	DIR *dir = NULL;	struct dirent *ptr = NULL;	int i = 0;	char **song_list = NULL;	if(song_path == NULL || song_num == NULL)		return NULL;	*song_num = 0;	dir = opendir(song_path);	if(dir == NULL)		return NULL;	while((ptr=readdir(dir))!=NULL)	//è¯»æ­Œæ›²åï¼Œå­˜æ­Œæ›²	{		if(strstr(ptr->d_name, ".mp3"))//è¯†åˆ«.mp3æ–‡ä»¶,ä¸ä¸¥è°¨		{			++(*song_num);			//printf("song_num = %d\n", *song_num);		}	}	if(song_num==0)	{		printf("%s is no mp3\n",song_path);		return NULL;	}	rewinddir(dir);	song_list = (char **)calloc(*song_num, sizeof(char *));	if(song_list == NULL)	{		printf("song_list calloc error\n");		return NULL;	}	while((ptr=readdir(dir))!=NULL)	//è¯»æ­Œæ›²åï¼Œå­˜æ­Œæ›²	{		if(strstr(ptr->d_name, ".mp3"))//è¯†åˆ«.mp3æ–‡ä»¶,ä¸ä¸¥è°¨		{			song_list[i] = (char *)malloc(strlen(ptr->d_name)+1);			bzero(song_list[i], (strlen(ptr->d_name)+1));			strcpy(song_list[i], ptr->d_name);		//	printf("song_list[%d] = [%s]\n", i, song_list[i]);			i++;		}	}	closedir(dir);	return song_list;}/********************************************************   º¯Êı¹¦ÄÜ:ÊÍ·Å¸èÇúÁĞ±í*   ²ÎÊıÀàĞÍ:song_list=¸èÇúÁĞ±íÖ¸Õë,song_num=¸èÇú¸öÊı*   ·µ»ØÀàĞÍ:·µ»Ø¸èÇúÁĞ±íÖ¸ÕëÎª¿Õ********************************************************/char **release_song_list(char **song_list, int song_num){    int i;    printf("release song list\n");    for(i=0;i<song_num;i++)	{        free(song_list[i]);    }    free(song_list);    return NULL;}